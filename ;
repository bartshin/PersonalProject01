using System;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UIElements;

public class PlayerHpView : VisualElement
{
  /****************** Text ***********************************/
  const string MOTHERSHIP_LABEL_TEXT = "Mother Ship";
  /****************** USS Selector ***************************/
  const string CONTAINER = "player-hp-view-container";
  const string MOTHERSHIP_STATUS_CONTAINER = "mothership-status-container";
  const string BORNECRAFT_SHIPS_STATUS_VIEW = "bornecraft-ships-status-view";
  const string BORNECRAFT_SHIP_STATUS_CONTAINER = "bornecraft-ship-status-container";
  const string HP_CONTAINER = "hp-container";
  const string HP_LABEL = "hp-label";
  const string HP_BAR = "hp-bar";
  const string STATUS_CONTAINER_LABEL = "status-container-label";
  const string HP_BACKGROUND = "hp-background";
  const string HP_FILL = "hp-fill";
  const string HP_MASK = "hp-mask";

  public PlayerHpView()
  {
    this.name = PlayerHpView.CONTAINER;
  }

  public void CreateUI()
  {
    var motherShipHpContainer = this.CreateMotherShipStatusView();
    var borneCraftShipsHpView = new VisualElement();
    borneCraftShipsHpView.name = PlayerHpView.BORNECRAFT_SHIPS_STATUS_VIEW;
    for (int i = 0; i < 3; i++) {
      borneCraftShipsHpView.Add(this.CreateBorneCraftStatusView()); 
    } 
    this.Add(motherShipHpContainer);
    this.Add(borneCraftShipsHpView);
  }

  VisualElement CreateMotherShipStatusView()
  {
    var container = new VisualElement();
    container.name = PlayerHpView.MOTHERSHIP_STATUS_CONTAINER;

    var containerLabel = new Label(PlayerHpView.MOTHERSHIP_LABEL_TEXT);
    containerLabel.AddToClassList(PlayerHpView.STATUS_CONTAINER_LABEL);
    container.Add(containerLabel);
    var hpBar = this.CreateHpBar("HP");
    container.Add(hpBar);
    return (container);
  }

  VisualElement CreateHpBar(in string labelText)
  {
    var container = new VisualElement();
    container.AddToClassList(PlayerHpView.HP_CONTAINER);

    var label = new Label(labelText);
    label.AddToClassList(PlayerHpView.HP_LABEL);
    container.Add(label);

    var hpBar = new VisualElement();
    hpBar.AddToClassList(PlayerHpView.HP_BAR);
    container.Add(hpBar);

    var background = new VisualElement();
    background.AddToClassList(PlayerHpView.HP_BACKGROUND);
    hpBar.Add(background);

    var mask = new VisualElement();
    mask.AddToClassList(PlayerHpView.HP_MASK);
    background.Add(mask);

    var fill = new VisualElement();
    fill.AddToClassList(PlayerHpView.HP_FILL);
    mask.Add(fill);
    return (container);
  }

  VisualElement CreateBorneCraftStatusView()
  {
    var container = new VisualElement();
    container.AddToClassList(PlayerHpView.BORNECRAFT_SHIP_STATUS_CONTAINER);
    return (container);
  }
}
